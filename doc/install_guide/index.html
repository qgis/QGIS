<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.70)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Building and Installing QGIS</TITLE>
<META NAME="description" CONTENT="Building and Installing QGIS">
<META NAME="keywords" CONTENT="install">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="install.css">

</HEAD>

<BODY >

<P>

<P>
<H1 ALIGN=CENTER>Building and Installing QGIS</H1>
<P ALIGN=CENTER><STRONG>Gary Sherman  - Tim Sutton</STRONG></P>
<P ALIGN=LEFT></P>
<BR>

<H2><A NAME="SECTION00010000000000000000">
Contents</A>
</H2>
<!--Table of Contents-->

<UL>
<LI><A NAME="tex2html41"
  HREF="install.html#SECTION00020000000000000000">Introduction</A>
<UL>
<LI><A NAME="tex2html42"
  HREF="install.html#SECTION00021000000000000000">Installing Windows Version</A>
<LI><A NAME="tex2html43"
  HREF="install.html#SECTION00022000000000000000">Installing Mac OSX Version</A>
<LI><A NAME="tex2html44"
  HREF="install.html#SECTION00023000000000000000">Building from Source</A>
</UL>
<BR>
<LI><A NAME="tex2html45"
  HREF="install.html#SECTION00030000000000000000">Getting QGIS</A>
<LI><A NAME="tex2html46"
  HREF="install.html#SECTION00040000000000000000">PostgreSQL</A>
<LI><A NAME="tex2html47"
  HREF="install.html#SECTION00050000000000000000">GEOS</A>
<LI><A NAME="tex2html48"
  HREF="install.html#SECTION00060000000000000000">PostGIS</A>
<LI><A NAME="tex2html49"
  HREF="install.html#SECTION00070000000000000000">GRASS</A>
<LI><A NAME="tex2html50"
  HREF="install.html#SECTION00080000000000000000">GDAL/OGR</A>
<LI><A NAME="tex2html51"
  HREF="install.html#SECTION00090000000000000000">Qt</A>
<LI><A NAME="tex2html52"
  HREF="install.html#SECTION000100000000000000000">Building QGIS</A>
<UL>
<LI><A NAME="tex2html53"
  HREF="install.html#SECTION000101000000000000000">Quick and Dirty</A>
<LI><A NAME="tex2html54"
  HREF="install.html#SECTION000102000000000000000">Configuring QGIS the Right Way</A>
</UL>
<BR>
<LI><A NAME="tex2html55"
  HREF="install.html#SECTION000110000000000000000">Building Plugins</A>
</UL>
<!--End of Table of Contents--> 

<P>


<P>

<H1><A NAME="SECTION00020000000000000000"></A><A NAME="label_introduction"></A>
<BR>
Introduction
</H1>
This document briefly describes how to build QGIS 0.6 (<I>`Simon'</I>) from the source distribution. These instructions are for Linux/Unix and other POSIX systems which have the required build environment.

<P>
The latest version of this document can always be found at <TT><A NAME="tex2html1"
  HREF="http://qgis.org/docs/install.html">http://qgis.org/docs/install.html</A></TT>.

<H2><A NAME="SECTION00021000000000000000">
Installing Windows Version</A>
</H2>
Installing the Windows version of QGIS is simply a matter of running the user friendly setup wizard. See the README.WIN32 file for additional information regarding the Windows version of QGIS. At version 0.6, the GRASS plugin is not available in Windows.

<H2><A NAME="SECTION00022000000000000000">
Installing Mac OSX Version</A>
</H2>
To install the compressed disk image containing the OSX version of QGIS,
double-click to expand and mount the image, then drag QGIS application to your
hard drive. The OSX version does not include GRASS support.

<P>

<H2><A NAME="SECTION00023000000000000000">
Building from Source</A>
</H2>
The remainder of this document deals with compiling and installing QGIS from the
source code. Specifically this applies to Linux/Unix systems.

<P>
QGIS can be installed with three levels of support for data stores:

<OL>
<LI>Basic raster and vector support (GDAL and OGR formats)
</LI>
<LI>PostreSQL/GEOS/PostGIS 
</LI>
<LI>GRASS raster and vector support
</LI>
</OL> 

<P>
Basic support uses the GDAL/OGR libraries and supports many raster and vector formats. For more information on the available formats, see <TT><A NAME="tex2html2"
  HREF="http://www.remotesensing.org:16080/gdal/formats_list.html">http://www.remotesensing.org:16080/gdal/formats_list.html</A></TT> and <TT><A NAME="tex2html3"
  HREF="http://www.remotesensing.org:16080/gdal/ogr/ogr_formats.html">http://www.remotesensing.org:16080/gdal/ogr/ogr_formats.html</A></TT>.

<P>
PostgreSQL/PostGIS support allows you to store spatial data in a PostgreSQL database. GRASS support provides access to GRASS mapsets. 

<P>
<B>Note:</B> - If you plan to build QGIS with GRASS support, version 1.2.3 or higher of GDAL must be used. 

<P>
Each of the requirements are discussed below. Note that the information given below is abstracted from the installation documentation for each of the libraries. See the install information for each library to get detailed instructions. In the documentation below, the file names and versions used are examples.

<P>
If you are building QGIS without PostgreSQL or GRASS support, skip to the section on Installing GDAL/OGR. 

<H1><A NAME="SECTION00030000000000000000">
Getting QGIS</A>
</H1>
QGIS is available in both source and package format from <TT><A NAME="tex2html4"
  HREF="http://qgis.org">http://qgis.org</A></TT>. 

<P>
In addition, packages for many Linux distributions are independently maintained in various locations. See 
the <I>Download</I> section on <TT><A NAME="tex2html5"
  HREF="http://qgis.org">http://qgis.org</A></TT> for the latest information on package locations.

<P>
Packages for most of the software/libraries discussed below can be found for almost all Linux distributions. While it is possible to mix compiling from source and installing packages to meet the requirements for QGIS, sometimes this becomes tricky. Following the steps below will generally ensure a successful installation. If you are using SuSE 9.1, the LinGIS distribution <TT><A NAME="tex2html6"
  HREF="ftp://ftp.lingis.org">ftp://ftp.lingis.org</A></TT> is a good choice for installing QGIS and its dependencies.

<P>

<H1><A NAME="SECTION00040000000000000000">
PostgreSQL</A>
</H1>
  QGIS uses the latest features of PostgreSQL. For this reason, version 7.4.x or higher is recommended with QGIS version 0.5. If you choose to add PostgreSQL, you must also install PostGIS and the GEOS library (see below). 
  
<OL>
<LI>Download PostgreSQL source from www.postgresql.org 
</LI>
<LI>Extract the source 
  <PRE>
  tar -xzf postgresql-7.4.1.tar.gz
</PRE>

<P>
</LI>
<LI>Change to the source directory 
  <PRE>
  cd postgresql-7.4.1
</PRE>

<P>
</LI>
<LI>Configure PostgreSQL:
  <PRE>
  ./configure --prefix=/usr/local/pgsql
</PRE>

<P>
</LI>
<LI>Build
  <PRE>
  make
</PRE>

<P>
</LI>
<LI>Install
  <PRE>
  make install
</PRE>

<P>
</LI>
<LI>As root, create the postgres user and setup the database (following taken from PostgreSQL INSTALL file with modification)

<UL>
<LI>Create the postgres user 
  <PRE>
  adduser postgres
</PRE>

<P>
</LI>
<LI>Create the directory for the PostgreSQL database 
  <PRE>
  mkdir /usr/local/pgsql/data
</PRE>

<P>
</LI>
<LI>Change ownership of the data directory to the postgres user
  <PRE>
  chown postgres /usr/local/pgsql/data
</PRE>

<P>
</LI>
<LI>su to the postgres user (or login as postgres)
  <PRE>
  su - postgres
</PRE>

<P>
</LI>
<LI>Change to the PostgreSQL install directory 
  <PRE>
  cd /usr/local/pgsql
</PRE>

<P>
</LI>
<LI>Initialize the database 
  <PRE>
  ./bin/initdb -D /usr/local/pgsql/data
</PRE>

<P>
</LI>
<LI>Start the PostgreSQL daemon 
  <FONT SIZE="-1">  </FONT><PRE>
  ./bin/pg_ctl start  -o "-i" -D /usr/local/pgsql/data -l /home/postgres/serverlog
</PRE><FONT SIZE="-1"> 
</FONT>
<P>
<FONT SIZE="-1">
</LI>
<LI>Create the test database
</FONT>
<P>
<PRE>
  ./bin/createdb test
</PRE><FONT SIZE="-1">
  </FONT>
</LI>
</UL>
</LI>
<LI>PostgreSQL should now be running. Logon as the postgres user (or use su - postgres). You should be able to connect to the test database and execute a test query with the following commands: 

<P>
<PRE>
  psql test
  select version();
  version
  -------------------------------------------------------------------------------------
  PostgreSQL 7.4.1 on i686-pc-linux-gnu, compiled by GCC gcc (GCC) 3.3.1 (SuSE Linux)
(1 row)

  \q
</PRE>

<P>
</LI>
<LI>PostgreSQL install is done
  
</LI>
</OL>

<P>

<H1><A NAME="SECTION00050000000000000000">
GEOS</A>
</H1>

<P>
<B>Note:</B> As of version 0.6, GEOS is a requirement in order to build QGIS.

<P>
QGIS uses GEOS to properly fetch features from the the underlying datastore
  when doing an identify or select operation.

<P>
To install GEOS:
  
<OL>
<LI>Download GEOS source from <TT><A NAME="tex2html7"
  HREF="http://geos.refractions.net">http://geos.refractions.net</A></TT>
</LI>
<LI>Untar GEOS
  <PRE>
  tar -xzf geos-2.0.0.tar.gz
</PRE>
</LI>
<LI>Change to the GEOS source dir
  <PRE>
  cd geos-2.0-.0
</PRE>
</LI>
<LI>Follow the instructions in the GEOS README file to complete the installation. Typically the install goes like this:
  <PRE>
  ./configure
  make
  make install
</PRE>

<P>
</LI>
</OL>

<P>

<H1><A NAME="SECTION00060000000000000000">
PostGIS</A>
</H1>

<P>
NOTE - You must edit the PostGIS Makefile and make sure that USE_GEOS=1 is
  set. Also adjust GEOS_DIR to point to your GEOS installation directory.
  
<OL>
<LI>Download PostGIS source from <TT><A NAME="tex2html8"
  HREF="http://postgis.refractions.net">http://postgis.refractions.net</A></TT> 

<P>
</LI>
<LI>Untar PostGIS into the contrib subdirectory of the postgresql build directory. The contrib subdirectory is located in the directory created in step 3 of the PostgreSQL installation process.
</LI>
<LI>Change to the postgis subdirectory
</LI>
<LI>Edit the Makefile to enable GEOS support (see the note above)
</LI>
<LI>PostGIS provides a manual in the doc/html subdirectory that explains the build process (see the Installation section)
</LI>
<LI>The quick and dirty steps to install PostGIS are:
  <PRE>
   cd contrib
   gunzip postgis-0.8.0.tar.gz 
   tar xvf postgis-0.8.0.tar 
   cd postgis-0.8.0 
   make 
   make install 
   createlang plpgsql yourtestdatabase 
   psql -d yourtestdatabase -f postgis.sql 
   psql -d yourtestdatabase -f spatial_ref_sys.sql
</PRE>
</LI>
</OL>
The <B>better way</B> to install PostGIS is to carefully follow the instructions in the PostGIS manual in the doc/html subdirectory or the online manual at <TT><A NAME="tex2html9"
  HREF="http://postgis.refractions.net/docs">http://postgis.refractions.net/docs</A></TT>
<P>

<H1><A NAME="SECTION00070000000000000000">
GRASS</A>
</H1>
If you want QGIS to support GRASS vector and raster layers, you must build GRASS prior to proceeding. 
Follow the directions on the GRASS website carefully to build version 5.7. Additional information and the build instructions can be found at <TT><A NAME="tex2html10"
  HREF="http://grass.itc.it">http://grass.itc.it</A></TT>.

<P>
The GRASS software is available for download at <TT><A NAME="tex2html11"
  HREF="http://grass.itc.it/download.html">http://grass.itc.it/download.html</A></TT>.

<P>

<H1><A NAME="SECTION00080000000000000000">
GDAL/OGR</A>
</H1>
  The GDAL and OGR libraries provide support for raster and vector data formats. QGIS makes use of both of these libraries (which come bundled in one distribution).

<P>
Note: A Linux binary of GDAL is available at <TT><A NAME="tex2html12"
  HREF="http://www.remotesensing.org/gdal">http://www.remotesensing.org/gdal</A></TT>. If you choose to install the binary you will also need to download and unpack the source tree since QGIS needs the header files in order to compile.

<P>
To install GDAL/OGR from source:
  
<OL>
<LI>Download the GDAL distribution from <TT><A NAME="tex2html13"
  HREF="http://www.remotesensing.org/gdal">http://www.remotesensing.org/gdal</A></TT>. You should use version 1.1.9 or higher. Versions prior to 1.1.9 contained a bug that caused problems when a null feature was encountered. If you want to build vector support for GRASS, you must use GDAL 1.2.3.

<P>
</LI>
<LI>Untar the distribution 
  <PRE>
    tar xfvz /../path/../gdal-x.x.x.tar.gz
</PRE>

<P>
</LI>
<LI>Change to the gdal-x.x.x subdirectory that was created by step 2
  <PRE>
    cd gdal-x.x.x
</PRE>

<P>
</LI>
<LI>Configure GDAL
  <PRE>
    ./configure
</PRE>
  or if you want GRASS support
  <PRE>
    ./configure --with-grass=&lt;full path to grass install&gt;
</PRE>
  Depending on the GDAL version you are building, it may be necessary to specify -without-ogdi when running configure if you don't have the OGDI libary avaiable on your system.

<P>
</LI>
<LI>Build and install GDAL:
  <PRE>
    make
    su
    make install
</PRE>

<P>
</LI>
<LI>In order to run GDAL after installing it is necessary for the shared
  library to be findable. This can often be accomplished by setting
  LD_LIBRARY_PATH to include /usr/local/lib. On Linux, you can add
  /usr/local/lib (or whatever path you used for installing GDAL) to
  /etc/ld.so.conf and run ldconfig as root.

<P>
</LI>
<LI>Make sure that gdal-config (found in the bin subdirectory where GDAL was installed) is included in the PATH. If necessary, add the path to gdal-config to the PATH environment variable.
  <PRE>
    export PATH=/../path/../gdal-config:$PATH
</PRE>

<P>
</LI>
<LI>Check the install by running:
  <PRE>
    gdal-config --prefix
</PRE>

<P>
</LI>
</OL>

<P>
If you've had problems during the installation, refer to this manual, where the whole process is described with some more detail: <TT><A NAME="tex2html14"
  HREF="http://www.remotesensing.org/gdal/gdal_building.html">http://www.remotesensing.org/gdal/gdal_building.html</A></TT> 

<P>

<H1><A NAME="SECTION00090000000000000000">
Qt</A>
</H1>
  Qt 3.1.2 or higher is required in order to compile QGIS. You may already have Qt on your system. If so, check to see if you have version 3.1.2 or later. You can check the Qt version using the find command:
  <PRE>
  find ./ -name qglobal.h 2&gt;/dev/null | xargs grep QT_VERSION_STR
</PRE>
  If you have the locate utility installed you can do the same more quickly using:
  <PRE>
  locate qglobal.h | xargs grep QT_VERSION_STR
</PRE>
  In either case the result should look something like this:
  <PRE>
   #define QT_VERSION_STR   "3.3.1"
</PRE> 
   In the example above, Qt 3.3.1 is installed.

<P>
If Qt is not installed, you will have to install the Qt development package for your distribution. If you are not able to install the required Qt packages, you will have to build from source.

<P>
To install Qt from source:
  
<OL>
<LI>Download Qt from <TT><A NAME="tex2html15"
  HREF="http://www.trolltech.com/developer">http://www.trolltech.com/developer</A></TT> (choose the Qt/X11 Free Edition)
</LI>
<LI>Unpack the distribution
</LI>
<LI>Follow directions provided in the distribution directory (doc/html/install-x11.html)
</LI>
<LI>Use whatever configure options you like but make sure you include -thread for use with QGIS. You can configure Qt with minimal options:
  <PRE>
    ./configure -thread
</PRE>

<P>
</LI>
<LI>Complete the installation per the instructions provided in the Qt documentation (see step 3)
  
</LI>
</OL>

<P>

<H1><A NAME="SECTION000100000000000000000">
Building QGIS</A>
</H1>

<P>
After you have installed the required libraries, you are ready to build QGIS. Download and untar the QGIS distribution and change to the QGIS source directory. You have two options for building and installing QGIS: <B>Quick and Dirty</B> and the <B>right way</B>.
  
<H2><A NAME="SECTION000101000000000000000">
Quick and Dirty</A>
</H2>
  If you don't need PostgreSQL support and have installed GDAL ,
  you can configure and build QGIS by changing to the distribution directory
  and typing:
  <PRE>./configure
    make
    make install
</PRE>
  The above assumes that the gdal-config program is in your PATH
  See the next section for the full configuration instructions.
  
<H2><A NAME="SECTION000102000000000000000">
Configuring QGIS the Right Way</A>
</H2>
  To see the configure options available, change the the QGIS 
  directory and enter:
  <PRE>
    ./configure --help
</PRE>
  Among other options, there are three that are important to
  the success of the build:
  <PRE>
    --with-qtdir=DIR              Qt installation directory default=$QTDIR
    --with-gdal=path/gdal-config  Full path to 'gdal-config' script,
                                  e.g. '--with-gdal=/usr/local/bin/gdal-config'
    --with-pg=path/pg_config      PostgreSQL (PostGIS) Support
                                 (full path to pg_config)
     --with-grass=DIR             GRASS Support (full path to GRASS binary package)
</PRE>

<P>

<H3><A NAME="SECTION000102100000000000000">
Qt</A>
</H3>
  The configure script will detect Qt, unless it is installed in a
  non-standard location. Setting the QTDIR environment variable will 
  make ensure that the detection succeeds. You can also specify the
  path using the -with-qtdir option. 
  
<H3><A NAME="SECTION000102200000000000000">
GDAL</A>
</H3>
  If the gdal-config script is in the PATH, configure will automatically
  detect and configure GDAL support. If not in the path, you can specify
  the full path to gdal-config using the -with-gdal option. For example:
  <PRE>
    /configure --with-gdal=/usr/mystuff/bin/gdal-config
</PRE>
<H3><A NAME="SECTION000102300000000000000">
PostgreSQL</A>
</H3>
  If the pg_config script is in the PATH, configure will automatically
  detect and configure PostgreSQL support. If not, you can use the
  -with-pg option to specify the full path to pg_config. For example:
  <PRE>
    ./configure --with-pg=/usr/local/psql/bin/pg_config
</PRE>
<H3><A NAME="SECTION000102400000000000000">
GRASS</A>
</H3>
To build QGIS with GRASS support you must specify the full path to the installed GRASS binary package:
<PRE>
    ./configure --with-grass=/usr/local/grass-5.7.0
</PRE>
This assumes that GRASS is installed in the default location. Change the path to match the location of your GRASS installation.
  
<H3><A NAME="SECTION000102500000000000000">
Example Use of Configure</A>
</H3>
  An example of use of configure for building QGIS with all options:
  <PRE>
    ./configure --prefix=/usr/local/qgis \
    --with-gdal=/usr/local/gdal/bin/gdal-config \
    --with-pg=/usr/local/psql/bin/pg_config \
    --with-grass=/usr/local/grass-5.7.0
</PRE>
  This will configure QGIS to use GDAL, GRASS, and PostgreSQL. QGIS will be
  installed in /usr/local/qgis.

<P>
If QTDIR is set and gdal-config and pg_config are both
  in the PATH, there is no need to use the -with-gdal and -with-pg
  options. The configure script will properly detect and configure
  GDAL and PostgreSQL. You must still use the -with-grass option if building with GRASS support.
  
<H3><A NAME="SECTION000102600000000000000">
Compiling and Installing QGIS</A>
</H3>
  Once properly configured simply issue the following commands:
  <PRE>
    make
    make install
</PRE>
NOTE - As of version 0.1, you can no longer run QGIS from the src directory. You must do a make install and start QGIS from the installed location. In the case of the example above, the QGIS binary resides in the bin subdirectory of the directory specified with the prefix option (/usr/local/qgis/bin).

<P>
For information on using QGIS see the QGIS User Guide.

<P>

<H1><A NAME="SECTION000110000000000000000">
Building Plugins</A>
</H1>
The QGIS source distribution contains a number of "core" plugins. These are built along with QGIS using the instructions above. Additional external plugins are available from the QGIS community website at <TT><A NAME="tex2html16"
  HREF="http://community.qgis.org">http://community.qgis.org</A></TT>. Instructions for building an external plugin can be found at <TT><A NAME="tex2html17"
  HREF="http://wiki.qgis.org/qgiswiki/StepByStepBuildInstructions">http://wiki.qgis.org/qgiswiki/StepByStepBuildInstructions</A></TT>. Some external plugins may include instructions on building. If so, follow the instructions provided with the plugin rather than those provided in the wiki. 

<H1><A NAME="SECTION000120000000000000000">
About this document ...</A>
</H1>
 <STRONG>Building and Installing QGIS</STRONG><P>
This document was generated using the
<A HREF="http://www.latex2html.org/"><STRONG>LaTeX</STRONG>2<tt>HTML</tt></A> translator Version 2002-2-1 (1.70)
<P>
Copyright &#169; 1993, 1994, 1995, 1996,
<A HREF="http://cbl.leeds.ac.uk/nikos/personal.html">Nikos Drakos</A>, 
Computer Based Learning Unit, University of Leeds.
<BR>
Copyright &#169; 1997, 1998, 1999,
<A HREF="http://www.maths.mq.edu.au/~ross/">Ross Moore</A>, 
Mathematics Department, Macquarie University, Sydney.
<P>
The command line arguments were: <BR>
 <STRONG>latex2html</STRONG> <TT>-dir html -nonavigation -split 0 install.tex</TT>
<P>
The translation was initiated by Gary Sherman on 2004-12-19
<BR><HR>
<ADDRESS>
Gary Sherman
2004-12-19
</ADDRESS>
</BODY>
</HTML>
