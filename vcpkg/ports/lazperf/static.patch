diff --git a/cmake/functions.cmake b/cmake/functions.cmake
index b94f4eb..56f4943 100644
--- a/cmake/functions.cmake
+++ b/cmake/functions.cmake
@@ -1,7 +1,5 @@
 function(lazperf_add_library _target _type)
     add_library(${_target} ${_type} ${ARGN})
     lazperf_library_compile_settings(${_target} ${_type})
-    if (${_type} STREQUAL "SHARED")
-        lazperf_install_library(${_target})
-    endif()
+    lazperf_install_library(${_target})
 endfunction()
diff --git a/cpp/CMakeLists.txt b/cpp/CMakeLists.txt
index 60da7f3..8985ec0 100644
--- a/cpp/CMakeLists.txt
+++ b/cpp/CMakeLists.txt
@@ -5,12 +5,14 @@ file(GLOB SRCS
 )
 
 set (LAZPERF_SHARED_LIB lazperf)
-set (LAZPERF_STATIC_LIB lazperf_s)
+set (LAZPERF_STATIC_LIB lazperf)
 
-if (NOT EMSCRIPTEN)
+if (NOT EMSCRIPTEN AND LAZPERF_BUILD_SHARED_LIB)
     lazperf_add_library(${LAZPERF_SHARED_LIB} SHARED ${SRCS})
 endif()
-lazperf_add_library(${LAZPERF_STATIC_LIB} STATIC ${SRCS})
+if (LAZPERF_BUILD_STATIC_LIB)
+    lazperf_add_library(${LAZPERF_STATIC_LIB} STATIC ${SRCS})
+endif()
 
 install(
     FILES
