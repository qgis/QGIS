/************************************************************************
 * This file has been generated automatically from                      *
 *                                                                      *
 * src/core/qgsarrowiterator.h                                          *
 *                                                                      *
 * Do not edit manually ! Edit header and run scripts/sipify.py again   *
 ************************************************************************/











class QgsArrowInferSchemaOptions
{
%Docstring(signature="appended")
Options for inferring an ArrowSchema from a feature source.

.. versionadded:: 4.0
%End

%TypeHeaderCode
#include "qgsarrowiterator.h"
%End
  public:
    QgsArrowInferSchemaOptions();
%Docstring
Construct default options
%End

    void setGeometryColumnName( const QString &geometryColumnName );
%Docstring
Set the name that should be used to refer to the geometry column

If empty, the geometry column will be derived from the layer or be named
geometry if the layer does not declare a geometry column name.
%End

    QString geometryColumnName() const;
%Docstring
The name that should be used for a layer's geometry column

If empty, the geometry column should be derived from the layer or be
named geometry if the layer does not declare a geometry column name.
%End

};

class QgsArrowSchema
{
%Docstring(signature="appended")
Wrapper around an ArrowSchema.

This object provides a helper to allow schemas to be passed to or
returned from QGIS functions in C++ or Python. See the documentation for
the Arrow C Data Interface for how to interact with the underlying
ArrowSchema. https://arrow.apache.org/docs/format/CDataInterface.html

This object also stores the index of the geometry column that should
be/will be populated from the geometry of iterated-over features.

.. versionadded:: 4.0
%End

%TypeHeaderCode
#include "qgsarrowiterator.h"
%End
  public:
    QgsArrowSchema();
%Docstring
Construct invalid schema holder
%End

    QgsArrowSchema( const QgsArrowSchema &other );
%Docstring
Copy constructor
%End


    ~QgsArrowSchema();


    unsigned long long cSchemaAddress() const;
%Docstring
Returns the address of the underlying ArrowSchema for import or export
across boundaries

.. warning::

   This is intended for advanced usage and may cause a crash if used incorrectly.
%End

    void exportToAddress( unsigned long long otherAddress );
%Docstring
Export this array to the address of an empty ArrowSchema for export
across boundaries

.. warning::

   This is intended for advanced usage and may cause a crash if used incorrectly.
%End

    bool isValid() const;
%Docstring
Returns ``True`` if this wrapper object holds a valid ArrowSchema
%End

    int geometryColumnIndex() const;
%Docstring
Returns the index of the column in this schema that should be populated
with a feature geometry

Returns -1 if this value has not been specified.
%End

    void setGeometryColumnIndex( int geometryColumnIndex );
%Docstring
Set the index of the column in this schema that should be populated with
a feature geometry
%End

};

class QgsArrowArray
{
%Docstring(signature="appended")
Wrapper around an ArrowArray.

This object provides a helper to allow arrays to be passed to or
returned from QGIS functions in C++ or Python. See the documentation for
the Arrow C Data Interface for how to interact with the underlying
ArrowArray: https://arrow.apache.org/docs/format/CDataInterface.html

.. versionadded:: 4.0
%End

%TypeHeaderCode
#include "qgsarrowiterator.h"
%End
  public:
    QgsArrowArray();
%Docstring
Construct invalid array holder
%End



    ~QgsArrowArray();


    unsigned long long cArrayAddress() const;
%Docstring
Returns the address of the underlying ArrowArray for import or export
across boundaries

.. warning::

   This is intended for advanced usage and may cause a crash if used incorrectly.
%End

    void exportToAddress( unsigned long long otherAddress );
%Docstring
Export this array to the address of an empty ArrowArray for export
across boundaries

.. warning::

   This is intended for advanced usage and may cause a crash if used incorrectly.
%End

    bool isValid() const;
%Docstring
Returns ``True`` if this wrapper object holds a valid ArrowArray
%End

  private:
    QgsArrowArray( const QgsArrowArray &other );
};

class QgsArrowIterator
{
%Docstring(signature="appended")
Wrapper for an Arrow reader of features from vector data provider or
vector layer.

.. versionadded:: 4.0
%End

%TypeHeaderCode
#include "qgsarrowiterator.h"
%End
  public:
    QgsArrowIterator();
%Docstring
Construct invalid iterator
%End

    explicit QgsArrowIterator( QgsFeatureIterator featureIterator );
%Docstring
Construct iterator from an existing feature iterator
%End

    void setSchema( const QgsArrowSchema &schema );
%Docstring
Set the ArrowSchema for the output of all future batches

This must be set before calling
:py:func:`~QgsArrowIterator.nextFeatures`.
%End

    QgsArrowArray nextFeatures( int n );
%Docstring
Build an ArrowArray using the next n features (or fewer depending on the
number of features remaining)

If no features remain, the returned array will be invalid (i.e.,
:py:func:`~QgsArrowIterator.isValid` will return false).

:raises QgsException: if a feature's attribute cannot be appended to an
                      ArrowArray of the requested type or on internal
                      error when building the array.
%End

    static QgsArrowSchema inferSchema( const QgsVectorLayer &layer, const QgsArrowInferSchemaOptions &options = QgsArrowInferSchemaOptions() );
%Docstring
Infer the :py:class:`QgsArrowSchema` for a given
:py:class:`QgsVectorLayer`

:raises QgsException: if one or more attribute fields is of an
                      unsupported type.
%End

    static QgsArrowSchema inferSchema( const QgsFields &fields, bool hasGeometry = false, const QgsCoordinateReferenceSystem &crs = QgsCoordinateReferenceSystem(), const QgsArrowInferSchemaOptions &options = QgsArrowInferSchemaOptions() );
%Docstring
Infer the :py:class:`QgsArrowSchema` from components

:raises QgsException: if one or more attribute fields is of an
                      unsupported type.
%End

};

/************************************************************************
 * This file has been generated automatically from                      *
 *                                                                      *
 * src/core/qgsarrowiterator.h                                          *
 *                                                                      *
 * Do not edit manually ! Edit header and run scripts/sipify.py again   *
 ************************************************************************/
