<html><head>
<style type="text/css">
dl { border: 3px double #ccc; padding: 0.5em; } dt { float: left; clear: left; text-align: left; font-weight: bold; color: green; } dt:after { content: ":"; } dd { margin: 0 0 0 220px; padding: 0 0 0.5em 0; }
</style>
</head><body><h1>TrainRegression</h1><h2>Brief Description</h2>Train a classifier from multiple images to perform regression.<h2>Tags</h2>Learning<h2>Long Description</h2>This application trains a classifier from multiple input images or a csv file, in order to perform regression. Predictors are composed of pixel values in each band optionally centered and reduced using an XML statistics file produced by the ComputeImagesStatistics application.
 The output value for each predictor is assumed to be the last band (or the last column for CSV files). Training and validation predictor lists are built such that their size is inferior to maximum bounds given by the user, and the proportion corresponds to the balance parameter. Several classifier parameters can be set depending on the chosen classifier. In the validation process, the mean square error is computed
 This application is based on LibSVM and on OpenCV Machine Learning classifiers, and is compatible with OpenCV 2.3.1 and later.<h2>Parameters</h2><ul><li><b>[param] -io</b> &lt;string&gt; This group of parameters allows setting input and output data.. Mandatory: True. Default Value: &quot;0&quot;</li><li><b>[param] -sample</b> &lt;string&gt; This group of parameters allows you to set training and validation sample lists parameters.. Mandatory: True. Default Value: &quot;0&quot;</li><li><b>[param] -rand</b> &lt;int32&gt; Set specific seed. with integer value.. Mandatory: False. Default Value: &quot;0&quot;</li><li><b>[param] -inxml</b> &lt;string&gt; Load otb application from xml file. Mandatory: False. Default Value: &quot;&quot;</li><li><b>[param] -outxml</b> &lt;string&gt; Save otb application to xml file. Mandatory: False. Default Value: &quot;&quot;</li><b>[choice] -classifier</b> Choice of the classifier to use for the training. libsvm,dt,gbt,ann,rf,knn. Mandatory: True. Default Value: &quot;libsvm&quot;<ul><li><b>[group] -libsvm</b></li><ul><li><b>[param] -classifier.libsvm.k</b> &lt;string&gt; SVM Kernel Type.. Mandatory: True. Default Value: &quot;linear&quot;</li><li><b>[param] -classifier.libsvm.m</b> &lt;string&gt; Type of SVM formulation.. Mandatory: True. Default Value: &quot;epssvr&quot;</li><li><b>[param] -classifier.libsvm.c</b> &lt;float&gt; SVM models have a cost parameter C (1 by default) to control the trade-off between training errors and forcing rigid margins.. Mandatory: True. Default Value: &quot;1&quot;</li><li><b>[param] -classifier.libsvm.opt</b> &lt;boolean&gt; SVM parameters optimization flag.. Mandatory: False. Default Value: &quot;True&quot;</li><li><b>[param] -classifier.libsvm.prob</b> &lt;boolean&gt; Probability estimation flag.. Mandatory: False. Default Value: &quot;True&quot;</li><li><b>[param] -classifier.libsvm.eps</b> &lt;float&gt; . Mandatory: True. Default Value: &quot;0.001&quot;</li><li><b>[param] -classifier.libsvm.nu</b> &lt;float&gt; . Mandatory: True. Default Value: &quot;0.5&quot;</li></ul><li><b>[group] -dt</b></li><ul><li><b>[param] -classifier.dt.max</b> &lt;int32&gt; The training algorithm attempts to split each node while its depth is smaller than the maximum possible depth of the tree. The actual depth may be smaller if the other termination criteria are met, and/or if the tree is pruned.. Mandatory: True. Default Value: &quot;65535&quot;</li><li><b>[param] -classifier.dt.min</b> &lt;int32&gt; If all absolute differences between an estimated value in a node and the values of the train samples in this node are smaller than this regression accuracy parameter, then the node will not be split.. Mandatory: True. Default Value: &quot;10&quot;</li><li><b>[param] -classifier.dt.ra</b> &lt;float&gt; . Mandatory: True. Default Value: &quot;0.01&quot;</li><li><b>[param] -classifier.dt.cat</b> &lt;int32&gt; Cluster possible values of a categorical variable into K <= cat clusters to find a suboptimal split.. Mandatory: True. Default Value: &quot;10&quot;</li><li><b>[param] -classifier.dt.f</b> &lt;int32&gt; If cv_folds > 1, then it prunes a tree with K-fold cross-validation where K is equal to cv_folds.. Mandatory: True. Default Value: &quot;10&quot;</li><li><b>[param] -classifier.dt.r</b> &lt;boolean&gt; If true, then a pruning will be harsher. This will make a tree more compact and more resistant to the training data noise but a bit less accurate.. Mandatory: False. Default Value: &quot;True&quot;</li><li><b>[param] -classifier.dt.t</b> &lt;boolean&gt; If true, then pruned branches are physically removed from the tree.. Mandatory: False. Default Value: &quot;True&quot;</li></ul><li><b>[group] -gbt</b></li><ul><li><b>[param] -classifier.gbt.t</b> &lt;string&gt; Type of loss functionused for training.. Mandatory: True. Default Value: &quot;sqr&quot;</li><li><b>[param] -classifier.gbt.w</b> &lt;int32&gt; Number "w" of boosting algorithm iterations, with w*K being the total number of trees in the GBT model, where K is the output number of classes.. Mandatory: True. Default Value: &quot;200&quot;</li><li><b>[param] -classifier.gbt.s</b> &lt;float&gt; Regularization parameter.. Mandatory: True. Default Value: &quot;0.01&quot;</li><li><b>[param] -classifier.gbt.p</b> &lt;float&gt; Portion of the whole training set used for each algorithm iteration. The subset is generated randomly.. Mandatory: True. Default Value: &quot;0.8&quot;</li><li><b>[param] -classifier.gbt.max</b> &lt;int32&gt; The training algorithm attempts to split each node while its depth is smaller than the maximum possible depth of the tree. The actual depth may be smaller if the other termination criteria are met, and/or if the tree is pruned.. Mandatory: True. Default Value: &quot;3&quot;</li></ul><li><b>[group] -ann</b></li><ul><li><b>[param] -classifier.ann.t</b> &lt;string&gt; Type of training method for the multilayer perceptron (MLP) neural network.. Mandatory: True. Default Value: &quot;reg&quot;</li><li><b>[param] -classifier.ann.sizes</b> &lt;string&gt; The number of neurons in each intermediate layer (excluding input and output layers).. Mandatory: True. Default Value: &quot;&quot;</li><li><b>[param] -classifier.ann.f</b> &lt;string&gt; Neuron activation function.. Mandatory: True. Default Value: &quot;sig&quot;</li><li><b>[param] -classifier.ann.a</b> &lt;float&gt; Alpha parameter of the activation function (used only with sigmoid and gaussian functions).. Mandatory: True. Default Value: &quot;1&quot;</li><li><b>[param] -classifier.ann.b</b> &lt;float&gt; Beta parameter of the activation function (used only with sigmoid and gaussian functions).. Mandatory: True. Default Value: &quot;1&quot;</li><li><b>[param] -classifier.ann.bpdw</b> &lt;float&gt; Strength of the weight gradient term in the BACKPROP method. The recommended value is about 0.1.. Mandatory: True. Default Value: &quot;0.1&quot;</li><li><b>[param] -classifier.ann.bpms</b> &lt;float&gt; Strength of the momentum term (the difference between weights on the 2 previous iterations). This parameter provides some inertia to smooth the random fluctuations of the weights. It can vary from 0 (the feature is disabled) to 1 and beyond. The value 0.1 or so is good enough.. Mandatory: True. Default Value: &quot;0.1&quot;</li><li><b>[param] -classifier.ann.rdw</b> &lt;float&gt; Initial value Delta_0 of update-values Delta_{ij} in RPROP method (default = 0.1).. Mandatory: True. Default Value: &quot;0.1&quot;</li><li><b>[param] -classifier.ann.rdwm</b> &lt;float&gt; Update-values lower limit Delta_{min} in RPROP method. It must be positive (default = 1e-7).. Mandatory: True. Default Value: &quot;1e-07&quot;</li><li><b>[param] -classifier.ann.term</b> &lt;string&gt; Termination criteria.. Mandatory: True. Default Value: &quot;all&quot;</li><li><b>[param] -classifier.ann.eps</b> &lt;float&gt; Epsilon value used in the Termination criteria.. Mandatory: True. Default Value: &quot;0.01&quot;</li><li><b>[param] -classifier.ann.iter</b> &lt;int32&gt; Maximum number of iterations used in the Termination criteria.. Mandatory: True. Default Value: &quot;1000&quot;</li></ul><li><b>[group] -rf</b></li><ul><li><b>[param] -classifier.rf.max</b> &lt;int32&gt; The depth of the tree. A low value will likely underfit and conversely a high value will likely overfit. The optimal value can be obtained using cross validation or other suitable methods.. Mandatory: True. Default Value: &quot;5&quot;</li><li><b>[param] -classifier.rf.min</b> &lt;int32&gt; If the number of samples in a node is smaller than this parameter, then the node will not be split. A reasonable value is a small percentage of the total data e.g. 1 percent.. Mandatory: True. Default Value: &quot;10&quot;</li><li><b>[param] -classifier.rf.ra</b> &lt;float&gt; If all absolute differences between an estimated value in a node and the values of the train samples in this node are smaller than this regression accuracy parameter, then the node will not be split.. Mandatory: True. Default Value: &quot;0&quot;</li><li><b>[param] -classifier.rf.cat</b> &lt;int32&gt; Cluster possible values of a categorical variable into K <= cat clusters to find a suboptimal split.. Mandatory: True. Default Value: &quot;10&quot;</li><li><b>[param] -classifier.rf.var</b> &lt;int32&gt; The size of the subset of features, randomly selected at each tree node, that are used to find the best split(s). If you set it to 0, then the size will be set to the square root of the total number of features.. Mandatory: True. Default Value: &quot;0&quot;</li><li><b>[param] -classifier.rf.nbtrees</b> &lt;int32&gt; The maximum number of trees in the forest. Typically, the more trees you have, the better the accuracy. However, the improvement in accuracy generally diminishes and reaches an asymptote for a certain number of trees. Also to keep in mind, increasing the number of trees increases the prediction time linearly.. Mandatory: True. Default Value: &quot;100&quot;</li><li><b>[param] -classifier.rf.acc</b> &lt;float&gt; Sufficient accuracy (OOB error).. Mandatory: True. Default Value: &quot;0.01&quot;</li></ul><li><b>[group] -knn</b></li><ul><li><b>[param] -classifier.knn.k</b> &lt;int32&gt; The number of neighbors to use.. Mandatory: True. Default Value: &quot;32&quot;</li><li><b>[param] -classifier.knn.rule</b> &lt;string&gt; Decision rule for regression output. Mandatory: True. Default Value: &quot;mean&quot;</li></ul></ul></ul><h2>Limitations</h2>None<h2>Authors</h2>OTB-Team<h2>See Also</h2>OpenCV documentation for machine learning http://docs.opencv.org/modules/ml/doc/ml.html <h2>Example of use</h2><ul><li><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">io.il: training_dataset.tif</p></li><li><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">io.out: regression_model.txt</p></li><li><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">io.imstat: training_statistics.xml</p></li><li><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">classifier: libsvm</p></li></ul></body></html>